{"version":3,"file":"commonHelpers6.js","sources":["../src/js/pages/post.js"],"sourcesContent":["import news from '../../data/data-news';\nimport * as mainForm from '../main-form';\n\nconst postSection = document.querySelector('.post');\nconst heroSection = document.querySelector('.hero');\nconst commentsSection = document.querySelector('.comments');\nconst commentForm = document.querySelector('#commentForm');\nconst href = window.location.href;\nconst url = new URL(href);\nconst postId = +url.searchParams.get('post');\nconst iconUrl = new URL('/img/icons.svg', import.meta.url).href;\n\nconst newComment = {\n  id: '',\n  nickname: '',\n  date: '',\n  comment: '',\n};\n\nconst currentPost = news.filter(post => post.id === postId)[0];\n\nfunction loadPost() {\n  const markup = `\n    <img\n      class=\"post-img\"\n      src=\"${currentPost.img}\"\n      alt=\"News image\"\n    />\n    <div class=\"container\">\n      ${currentPost.post.reduce((acc, e) => {\n        let text = `<p class=\"${e.type}\">${e.text}</p>`;\n        if (e.type === 'quote-text') {\n          text = `<div class=\"quote\">\n            <svg class=\"quote-icon\">\n              <use href=\"${iconUrl}#icon-braces\"></use>\n            </svg>\n            <p class=\"${e.type}\">${e.text}</p>\n          </div>`;\n        } else if (e.type === 'post-list') {\n          const listMarkup = e.text.reduce(\n            (accum, li) =>\n              accum +\n              `<li>\n                <svg class=\"post-list-icon\">\n                  <use href=\"${iconUrl}#icon-check\"></use>\n                </svg>\n                ${li}\n              </li>`,\n            ''\n          );\n          text = `<ul class=\"post-list list\">\n            ${listMarkup}\n          </ul>`;\n        }\n        return acc + text;\n      }, '')}\n      <div class=\"post-share\">\n        <p>Share:</p>\n        <ul class=\"hero-soc-list list\">\n          <li>\n            <a href=\"\">\n              <svg>\n                <use href=\"${iconUrl}#icon-facebook\"></use>\n              </svg>\n            </a>\n          </li>\n          <li>\n            <a href=\"\">\n              <svg>\n                <use href=\"${iconUrl}#icon-linked\"></use>\n              </svg>\n            </a>\n          </li>\n          <li>\n            <a href=\"\">\n              <svg>\n                <use href=\"${iconUrl}#icon-twitter\"></use>\n              </svg>\n            </a>\n          </li>\n        </ul>\n      </div>\n    </div>`;\n  postSection.innerHTML = markup;\n}\n\nfunction loadHero() {\n  const markup = `<div class=\"container\">\n    <p class=\"page-path\">\n      <span class=\"page-path-dark\">Homepage / News</span> / ${currentPost.title}\n    </p>\n    <h1 class=\"page-title\">\n      ${currentPost.title}\n    </h1>\n    <div class=\"post-info\">\n      <ul class=\"post-date-list list\">\n        <li>${currentPost.type}</li>\n        <li class=\"post-date-decor-item\"></li>\n        <li>\n          <svg class=\"post-comment-icon\">\n            <use href=\"${iconUrl}#icon-clock\"></use>\n          </svg>\n          ${currentPost.date}\n        </li>\n        <li class=\"post-date-decor-item\"></li>\n        <li class=\"post-comments\">\n          <svg class=\"post-comment-icon\">\n            <use href=\"${iconUrl}#icon-comments\"></use>\n          </svg>\n          ${\n            currentPost.comments.length ? currentPost.comments.length : 'No'\n          } comments\n        </li>\n      </ul>\n      <ul class=\"hero-soc-list list\">\n        <li>\n          <a href=\"\">\n            <svg>\n              <use href=\"${iconUrl}#icon-facebook\"></use>\n            </svg>\n          </a>\n        </li>\n        <li>\n          <a href=\"\">\n            <svg>\n              <use href=\"${iconUrl}#icon-linked\"></use>\n            </svg>\n          </a>\n        </li>\n        <li>\n          <a href=\"\">\n            <svg>\n              <use href=\"${iconUrl}#icon-twitter\"></use>\n            </svg>\n          </a>\n        </li>\n      </ul>\n    </div>\n  </div>`;\n  heroSection.innerHTML = markup;\n}\n\nfunction loadComments() {\n  const markup = `\n    <div class=\"container\">\n      <p class=\"comments-title\">${\n        currentPost.comments.length ? currentPost.comments.length : 'No'\n      } comments</p>\n      <ul class=\"comments-list list\">\n        ${currentPost.comments.reverse().reduce(\n          (acc, com) =>\n            acc +\n            `\n            <li>\n            <div class=\"comments-info\">\n              <p class=\"comments-nickname\">${com.nickname}</p>\n              <p class=\"comments-date\">${com.date}</p>\n            </div>\n            <p class=\"comment\">\n              ${com.comment}\n              <a href=\"\" class=\"comment-reply\">\n                <svg>\n                  <use href=\"${iconUrl}#icon-reply\"></use>\n                </svg> Reply\n              </a>\n            </p>\n          </li>`,\n          ''\n        )}\n      </ul>\n    </div>`;\n  commentsSection.innerHTML = markup;\n}\n\nloadHero();\nloadPost();\nloadComments();\n\nfunction formatDate(date) {\n  const months = [\n    'Jan',\n    'Feb',\n    'Mar',\n    'Apr',\n    'May',\n    'Jun',\n    'Jul',\n    'Aug',\n    'Sep',\n    'Oct',\n    'Nov',\n    'Dec',\n  ];\n  const day = date.getDate();\n  const month = months[date.getMonth()];\n  const year = date.getFullYear();\n  return `${day} ${month}, ${year}`;\n}\n\ncommentForm.addEventListener('submit', event => {\n  event.preventDefault();\n  newComment.id = Date.now();\n  newComment.nickname = event.currentTarget.elements.username.value;\n  newComment.date = formatDate(new Date());\n  newComment.comment = event.currentTarget.elements.userComment.value;\n  commentForm.reset();\n  currentPost.comments.push(newComment);\n  loadComments();\n});\n"],"names":["postSection","heroSection","commentsSection","commentForm","href","url","postId","iconUrl","newComment","currentPost","news","post","loadPost","markup","acc","e","text","accum","li","loadHero","loadComments","com","formatDate","date","months","day","month","year","event"],"mappings":"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"}