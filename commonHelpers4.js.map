{"version":3,"file":"commonHelpers4.js","sources":["../src/js/pages/news.js"],"sourcesContent":["import news from '../../data/data-news';\nimport { CustomDropdown } from '../helpers/custom-dropdown';\n\nconst newsList = document.getElementById('news-list');\nconst filterList = document.getElementById('news-filter');\nconst filterListMobile = document.getElementById('news-filter-mobile');\n\nconst iconUrl = new URL('/img/icons.svg', import.meta.url).href;\nlet pageIndex = 1;\nlet newsType = 'all';\n\nloadNews(news, newsType);\n\nconst newsFilterDd = new CustomDropdown(\n  'news-filter-current',\n  'news-filter-mobile',\n  chooseNewsTypeDd\n);\n\nfunction chooseNewsTypeDd(filterBtn, option) {\n  pageIndex = 1;\n  newsType = option.dataset.filter;\n  const selectedFilter = filterBtn.querySelector('span');\n  if (selectedFilter) {\n    selectedFilter.textContent = option.textContent;\n  }\n  const prevFilter = filterListMobile.querySelector('.hidden');\n  if (prevFilter) {\n    prevFilter.classList.remove('hidden');\n  }\n  option.parentNode.classList.add('hidden');\n  loadNews(news, newsType);\n}\n\nfilterList.addEventListener('click', event => {\n  if (event.target.nodeName === 'BUTTON') {\n    const filterBtn = event.target;\n    const activeFilter = filterList.querySelector('.active');\n    if (activeFilter) {\n      activeFilter.classList.remove('active');\n    }\n    pageIndex = 1;\n    newsType = filterBtn.dataset.filter;\n    loadNews(news, newsType);\n    filterBtn.parentNode.classList.add('active');\n  }\n});\n\nfunction loadNews(list, type = 'all') {\n  let arr = 0;\n  if (type === 'all') {\n    arr = list;\n  } else {\n    arr = list.filter(e => e.type.toLowerCase() === type.toLowerCase());\n  }\n  const markup = arr.slice((pageIndex - 1) * 6, pageIndex * 6).reduce(\n    (acc, e) =>\n      acc +\n      `\n      <li class=\"news__card\">\n        <div class=\"news__card-img-wrapper\">\n          <img\n            class=\"news__card-img\"\n            src=\"${e.img}\"\n            alt=\"${e.title} image\"\n          />\n        </div>\n        <div class=\"news__card-box\">\n          <a class=\"news__card-title card-title\" href=\"./post.html?post=${\n            e.id\n          }\">${e.title}</a>\n          <ul class=\"news__date-list list\">\n            <li>${e.type}</li>\n            <li>${e.date}</li>\n            <li class=\"news__comments\">\n              <svg class=\"news__comment-icon\">\n                <use href=\"${iconUrl}#icon-comments\"></use>\n              </svg>\n              <p>\n                ${\n                  e.comments.length\n                    ? e.comments.length +\n                      (e.comments.length > 1 ? ' comments' : ' comment')\n                    : 'No comments'\n                }\n              </p>\n            </li>\n          </ul>\n          <p class=\"news__card-text\">\n          ${e.previewText}</p>\n        </div>\n      </li>`,\n    ''\n  );\n  newsList.innerHTML = markup;\n}\n"],"names":["newsList","filterList","filterListMobile","iconUrl","pageIndex","newsType","loadNews","news","CustomDropdown","chooseNewsTypeDd","filterBtn","option","selectedFilter","prevFilter","event","activeFilter","list","type","arr","e","markup","acc"],"mappings":"mLAGA,MAAMA,EAAW,SAAS,eAAe,WAAW,EAC9CC,EAAa,SAAS,eAAe,aAAa,EAClDC,EAAmB,SAAS,eAAe,oBAAoB,EAE/DC,EAAU,IAA0C,IAAA,6CAAA,KAAA,QAAA,EAAC,KAC3D,IAAIC,EAAY,EACZC,EAAW,MAEfC,EAASC,EAAMF,CAAQ,EAEF,IAAIG,EACvB,sBACA,qBACAC,CACF,EAEA,SAASA,EAAiBC,EAAWC,EAAQ,CAC3CP,EAAY,EACZC,EAAWM,EAAO,QAAQ,OAC1B,MAAMC,EAAiBF,EAAU,cAAc,MAAM,EACjDE,IACFA,EAAe,YAAcD,EAAO,aAEtC,MAAME,EAAaX,EAAiB,cAAc,SAAS,EACvDW,GACFA,EAAW,UAAU,OAAO,QAAQ,EAEtCF,EAAO,WAAW,UAAU,IAAI,QAAQ,EACxCL,EAASC,EAAMF,CAAQ,CACzB,CAEAJ,EAAW,iBAAiB,QAASa,GAAS,CAC5C,GAAIA,EAAM,OAAO,WAAa,SAAU,CACtC,MAAMJ,EAAYI,EAAM,OAClBC,EAAed,EAAW,cAAc,SAAS,EACnDc,GACFA,EAAa,UAAU,OAAO,QAAQ,EAExCX,EAAY,EACZC,EAAWK,EAAU,QAAQ,OAC7BJ,EAASC,EAAMF,CAAQ,EACvBK,EAAU,WAAW,UAAU,IAAI,QAAQ,CAC5C,CACH,CAAC,EAED,SAASJ,EAASU,EAAMC,EAAO,MAAO,CACpC,IAAIC,EAAM,EACND,IAAS,MACXC,EAAMF,EAENE,EAAMF,EAAK,OAAOG,GAAKA,EAAE,KAAK,gBAAkBF,EAAK,YAAW,CAAE,EAEpE,MAAMG,EAASF,EAAI,OAAOd,EAAY,GAAK,EAAGA,EAAY,CAAC,EAAE,OAC3D,CAACiB,EAAK,IACJA,EACA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAKa,EAAE,GAAG;AAAA,mBACL,EAAE,KAAK;AAAA;AAAA;AAAA;AAAA,0EAKd,EAAE,EACd,KAAe,EAAE,KAAK;AAAA;AAAA,kBAEJ,EAAE,IAAI;AAAA,kBACN,EAAE,IAAI;AAAA;AAAA;AAAA,6BAGKlB,CAAO;AAAA;AAAA;AAAA,kBAIlB,EAAE,SAAS,OACP,EAAE,SAAS,QACV,EAAE,SAAS,OAAS,EAAI,YAAc,YACvC,aACL;AAAA;AAAA;AAAA;AAAA;AAAA,YAKL,EAAE,WAAW;AAAA;AAAA,aAGrB,EACJ,EACEH,EAAS,UAAYoB,CACvB"}