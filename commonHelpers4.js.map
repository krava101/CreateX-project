{"version":3,"file":"commonHelpers4.js","sources":["../src/js/news.js"],"sourcesContent":["import news from \"../data/data-news\";\n\nconst newsList = document.querySelector(\"#news-list\");\nconst newsSection = document.querySelector(\".news\");\nconst pagList = document.querySelector(\".news-pagination-list\");\nconst nextBtn = document.querySelector(\"#next-page-btn\");\nconst filterList = document.querySelector(\".news-nav-list\");\nlet maxPages = Math.ceil(news.length / 6);\nlet newsType = \"all\";\nlet pageIndex = 1;\n\nfunction loadNews(newsArr, type = \"all\") {\n  let arr = 0;\n  if (type === \"all\") {\n    arr = newsArr;\n  } else {\n    arr = newsArr.filter(e => e.type.toLowerCase() === type.toLowerCase())\n  }\n  const markup = arr.slice((pageIndex - 1) * 6, pageIndex * 6).reduce((acc, e) =>\n    acc + `\n    <li class=\"news-card\">\n      <img\n        class=\"news-card-img\"\n        src=\"${e.img}\"\n        alt=\"News image\"\n      />\n      <div class=\"news-card-box\">\n        <a class=\"card-title\" href=\"./post.html?post=${e.id}\">${e.title}</a>\n        <ul class=\"news-date-list list\">\n          <li>${e.type}</li>\n          <li class=\"news-date-decor-item\"></li>\n          <li>${e.date}</li>\n          <li class=\"news-date-decor-item\"></li>\n          <li class=\"news-comments\">\n            <svg class=\"news-comment-icon\">\n              <use href=\"./img/icons.svg#icon-comments\"></use>\n            </svg>\n            ${e.comments.length} comments\n          </li>\n        </ul>\n        <p class=\"news-card-text\">\n          ${e.previewText}\n        </p>\n      </div>\n    </li>\n    `, '')\n  newsList.innerHTML = markup;\n  maxPages = Math.ceil(arr.length / 6);\n  setTimeout(() => {\n    newsList.style.height = \"100%\";\n  }, 200)\n}\n\nfunction loadPag() {\n  if (maxPages === 1) {\n    nextBtn.style.display = \"none\";\n    return pagList.innerHTML = \"\";\n  }\n  const pagArr = Array.from({ length: maxPages }, (_, i)=>i+1);\n  const markup = pagArr.slice(0, 4).reduce((acc, e) =>\n    acc + ` \n      <li class=\"news-pag-item\">\n        <button class=\"news-pagination-btn\" type=\"button\">${e}</button>\n      </li>\n  `, '');\n  pagList.innerHTML = markup;\n}\nloadNews(news, newsType);\nloadPag();\npagList.children[0].classList.add(\"active\");\n\npagList.addEventListener(\"click\", event => {\n  if (event.target !== event.currentTarget) {\n    Array.from(pagList.children).forEach(e => e.classList.remove(\"active\"));\n    newsList.style.height = \"1564px\";\n    pageIndex = +event.target.textContent;\n    event.target.parentNode.classList.add(\"active\");\n    newsSection.scrollIntoView({block: \"start\"})\n    loadNews(news, newsType);\n  }\n})\n\nnextBtn.addEventListener(\"click\", () => {\n  Array.from(pagList.children).forEach(e => e.classList.remove(\"active\"));\n  if (pageIndex < maxPages) {\n    pageIndex++;\n    if (pageIndex <= pagList.children.length) {\n      pagList.children[pageIndex - 1].classList.add(\"active\");\n    }\n    newsList.style.height = \"1564px\";\n    newsSection.scrollIntoView({block: \"start\"})\n    loadNews(news, newsType);\n  }\n  \n})\n\nfilterList.addEventListener(\"click\", event => {\n  Array.from(event.currentTarget.children).forEach(e => e.classList.remove(\"active\"));\n  event.target.parentNode.classList.add(\"active\");\n  pageIndex = 1;\n  newsType = event.target.dataset.filter;\n  nextBtn.style.display = \"block\";\n  loadNews(news, newsType);\n  loadPag();\n  pagList.children[0].classList.add(\"active\");\n})\n\n\n"],"names":["newsList","newsSection","pagList","nextBtn","filterList","maxPages","news","newsType","pageIndex","loadNews","newsArr","type","arr","e","markup","acc","loadPag","_","i","event"],"mappings":"0IAEA,MAAMA,EAAW,SAAS,cAAc,YAAY,EAC9CC,EAAc,SAAS,cAAc,OAAO,EAC5CC,EAAU,SAAS,cAAc,uBAAuB,EACxDC,EAAU,SAAS,cAAc,gBAAgB,EACjDC,EAAa,SAAS,cAAc,gBAAgB,EAC1D,IAAIC,EAAW,KAAK,KAAKC,EAAK,OAAS,CAAC,EACpCC,EAAW,MACXC,EAAY,EAEhB,SAASC,EAASC,EAASC,EAAO,MAAO,CACvC,IAAIC,EAAM,EACND,IAAS,MACXC,EAAMF,EAENE,EAAMF,EAAQ,OAAOG,GAAKA,EAAE,KAAK,YAAa,IAAKF,EAAK,aAAa,EAEvE,MAAMG,EAASF,EAAI,OAAOJ,EAAY,GAAK,EAAGA,EAAY,CAAC,EAAE,OAAO,CAACO,EAAKF,IACxEE,EAAM;AAAA;AAAA;AAAA;AAAA,eAIKF,EAAE;AAAA;AAAA;AAAA;AAAA,uDAIsCA,EAAE,OAAOA,EAAE;AAAA;AAAA,gBAElDA,EAAE;AAAA;AAAA,gBAEFA,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAMJA,EAAE,SAAS;AAAA;AAAA;AAAA;AAAA,YAIbA,EAAE;AAAA;AAAA;AAAA;AAAA,MAIP,EAAE,EACPb,EAAS,UAAYc,EACrBT,EAAW,KAAK,KAAKO,EAAI,OAAS,CAAC,EACnC,WAAW,IAAM,CACfZ,EAAS,MAAM,OAAS,MACzB,EAAE,GAAG,CACR,CAEA,SAASgB,GAAU,CACjB,GAAIX,IAAa,EACf,OAAAF,EAAQ,MAAM,QAAU,OACjBD,EAAQ,UAAY,GAG7B,MAAMY,EADS,MAAM,KAAK,CAAE,OAAQT,GAAY,CAACY,EAAGC,IAAIA,EAAE,CAAC,EACrC,MAAM,EAAG,CAAC,EAAE,OAAO,CAACH,EAAKF,IAC7CE,EAAM;AAAA;AAAA,4DAEkDF;AAAA;AAAA,IAEvD,EAAE,EACLX,EAAQ,UAAYY,CACtB,CACAL,EAASH,EAAMC,CAAQ,EACvBS,IACAd,EAAQ,SAAS,GAAG,UAAU,IAAI,QAAQ,EAE1CA,EAAQ,iBAAiB,QAASiB,GAAS,CACrCA,EAAM,SAAWA,EAAM,gBACzB,MAAM,KAAKjB,EAAQ,QAAQ,EAAE,QAAQW,GAAKA,EAAE,UAAU,OAAO,QAAQ,CAAC,EACtEb,EAAS,MAAM,OAAS,SACxBQ,EAAY,CAACW,EAAM,OAAO,YAC1BA,EAAM,OAAO,WAAW,UAAU,IAAI,QAAQ,EAC9ClB,EAAY,eAAe,CAAC,MAAO,OAAO,CAAC,EAC3CQ,EAASH,EAAMC,CAAQ,EAE3B,CAAC,EAEDJ,EAAQ,iBAAiB,QAAS,IAAM,CACtC,MAAM,KAAKD,EAAQ,QAAQ,EAAE,QAAQ,GAAK,EAAE,UAAU,OAAO,QAAQ,CAAC,EAClEM,EAAYH,IACdG,IACIA,GAAaN,EAAQ,SAAS,QAChCA,EAAQ,SAASM,EAAY,GAAG,UAAU,IAAI,QAAQ,EAExDR,EAAS,MAAM,OAAS,SACxBC,EAAY,eAAe,CAAC,MAAO,OAAO,CAAC,EAC3CQ,EAASH,EAAMC,CAAQ,EAG3B,CAAC,EAEDH,EAAW,iBAAiB,QAASe,GAAS,CAC5C,MAAM,KAAKA,EAAM,cAAc,QAAQ,EAAE,QAAQN,GAAKA,EAAE,UAAU,OAAO,QAAQ,CAAC,EAClFM,EAAM,OAAO,WAAW,UAAU,IAAI,QAAQ,EAC9CX,EAAY,EACZD,EAAWY,EAAM,OAAO,QAAQ,OAChChB,EAAQ,MAAM,QAAU,QACxBM,EAASH,EAAMC,CAAQ,EACvBS,IACAd,EAAQ,SAAS,GAAG,UAAU,IAAI,QAAQ,CAC5C,CAAC"}