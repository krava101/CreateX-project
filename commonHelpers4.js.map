{"version":3,"file":"commonHelpers4.js","sources":["../src/js/pages/news.js"],"sourcesContent":["import news from '../../data/data-news';\n\nconst newsList = document.querySelector('#news-list');\nconst filterList = document.getElementById('news-filter');\n\nconst filterCurrentBtn = document.getElementById('news-filter-current');\nconst filterListMobile = document.getElementById('news-filter-mobile');\n\nconst iconUrl = new URL('/img/icons.svg', import.meta.url).href;\nlet pageIndex = 1;\nlet newsType = 'all';\n\nloadNews(news, newsType);\n\nfilterCurrentBtn.addEventListener('click', handleOpenFilterMobile);\n\nfilterList.addEventListener('click', event => {\n  if (event.target.nodeName === 'BUTTON') {\n    const filterBtn = event.target;\n    const activeFilter = filterList.querySelector('.active');\n    if (activeFilter) {\n      activeFilter.classList.remove('active');\n    }\n    pageIndex = 1;\n    newsType = filterBtn.dataset.filter;\n    loadNews(news, newsType);\n    filterBtn.parentNode.classList.add('active');\n  }\n});\n\nfunction handleOpenFilterMobile() {\n  filterListMobile.classList.add('active');\n  filterCurrentBtn.classList.add('active');\n  filterListMobile.addEventListener('click', handleChooseFilter);\n  filterCurrentBtn.addEventListener('click', handleCloseFilterMobile);\n  document.addEventListener('click', clickOutsideTheFilter);\n}\n\nfunction clickOutsideTheFilter(event) {\n  if (\n    !filterListMobile.contains(event.target) &&\n    event.target !== filterCurrentBtn\n  ) {\n    handleCloseFilterMobile();\n  }\n}\n\nfunction handleCloseFilterMobile() {\n  filterListMobile.classList.remove('active');\n  filterCurrentBtn.classList.remove('active');\n  filterListMobile.removeEventListener('click', handleChooseFilter);\n  filterCurrentBtn.removeEventListener('click', handleCloseFilterMobile);\n  filterCurrentBtn.addEventListener('click', handleOpenFilterMobile);\n  document.removeEventListener('click', clickOutsideTheFilter);\n}\n\nfunction handleChooseFilter(event) {\n  if (event.target.nodeName === 'BUTTON') {\n    const filterBtn = event.target;\n    filterCurrentBtn.textContent = filterBtn.textContent;\n    const hiddenFilter = filterListMobile.querySelector('.hidden');\n    if (hiddenFilter) {\n      hiddenFilter.classList.remove('hidden');\n    }\n    filterBtn.parentNode.classList.add('hidden');\n    pageIndex = 1;\n    newsType = filterBtn.dataset.filter;\n    loadNews(news, newsType);\n    handleCloseFilterMobile();\n  }\n}\n\nfunction loadNews(list, type = 'all') {\n  let arr = 0;\n  if (type === 'all') {\n    arr = list;\n  } else {\n    arr = list.filter(e => e.type.toLowerCase() === type.toLowerCase());\n  }\n  const markup = arr.slice((pageIndex - 1) * 6, pageIndex * 6).reduce(\n    (acc, e) =>\n      acc +\n      `\n      <li class=\"news__card\">\n        <div class=\"news__card-img-wrapper\">\n          <img\n            class=\"news__card-img\"\n            src=\"${e.img}\"\n            alt=\"${e.title} image\"\n          />\n        </div>\n        <div class=\"news__card-box\">\n          <a class=\"news__card-title card-title\" href=\"./post.html?post=${\n            e.id\n          }\">${e.title}</a>\n          <ul class=\"news__date-list list\">\n            <li>${e.type}</li>\n            <li>${e.date}</li>\n            <li class=\"news__comments\">\n              <svg class=\"news__comment-icon\">\n                <use href=\"${iconUrl}#icon-comments\"></use>\n              </svg>\n              <p>\n                ${\n                  e.comments.length\n                    ? e.comments.length +\n                      (e.comments.length > 1 ? ' comments' : ' comment')\n                    : 'No comments'\n                }\n              </p>\n            </li>\n          </ul>\n          <p class=\"news__card-text\">\n          ${e.previewText}</p>\n        </div>\n      </li>`,\n    ''\n  );\n  newsList.innerHTML = markup;\n}\n"],"names":["newsList","filterList","filterCurrentBtn","filterListMobile","iconUrl","pageIndex","newsType","loadNews","news","handleOpenFilterMobile","event","filterBtn","activeFilter","handleChooseFilter","handleCloseFilterMobile","clickOutsideTheFilter","hiddenFilter","list","type","arr","e","markup","acc"],"mappings":"0HAEA,MAAMA,EAAW,SAAS,cAAc,YAAY,EAC9CC,EAAa,SAAS,eAAe,aAAa,EAElDC,EAAmB,SAAS,eAAe,qBAAqB,EAChEC,EAAmB,SAAS,eAAe,oBAAoB,EAE/DC,EAAU,IAAA,IAAA,6CAAA,KAAA,QAAA,EAA2C,KAC3D,IAAIC,EAAY,EACZC,EAAW,MAEfC,EAASC,EAAMF,CAAQ,EAEvBJ,EAAiB,iBAAiB,QAASO,CAAsB,EAEjER,EAAW,iBAAiB,QAASS,GAAS,CAC5C,GAAIA,EAAM,OAAO,WAAa,SAAU,CACtC,MAAMC,EAAYD,EAAM,OAClBE,EAAeX,EAAW,cAAc,SAAS,EACnDW,GACFA,EAAa,UAAU,OAAO,QAAQ,EAExCP,EAAY,EACZC,EAAWK,EAAU,QAAQ,OAC7BJ,EAASC,EAAMF,CAAQ,EACvBK,EAAU,WAAW,UAAU,IAAI,QAAQ,CAC5C,CACH,CAAC,EAED,SAASF,GAAyB,CAChCN,EAAiB,UAAU,IAAI,QAAQ,EACvCD,EAAiB,UAAU,IAAI,QAAQ,EACvCC,EAAiB,iBAAiB,QAASU,CAAkB,EAC7DX,EAAiB,iBAAiB,QAASY,CAAuB,EAClE,SAAS,iBAAiB,QAASC,CAAqB,CAC1D,CAEA,SAASA,EAAsBL,EAAO,CAElC,CAACP,EAAiB,SAASO,EAAM,MAAM,GACvCA,EAAM,SAAWR,GAEjBY,GAEJ,CAEA,SAASA,GAA0B,CACjCX,EAAiB,UAAU,OAAO,QAAQ,EAC1CD,EAAiB,UAAU,OAAO,QAAQ,EAC1CC,EAAiB,oBAAoB,QAASU,CAAkB,EAChEX,EAAiB,oBAAoB,QAASY,CAAuB,EACrEZ,EAAiB,iBAAiB,QAASO,CAAsB,EACjE,SAAS,oBAAoB,QAASM,CAAqB,CAC7D,CAEA,SAASF,EAAmBH,EAAO,CACjC,GAAIA,EAAM,OAAO,WAAa,SAAU,CACtC,MAAMC,EAAYD,EAAM,OACxBR,EAAiB,YAAcS,EAAU,YACzC,MAAMK,EAAeb,EAAiB,cAAc,SAAS,EACzDa,GACFA,EAAa,UAAU,OAAO,QAAQ,EAExCL,EAAU,WAAW,UAAU,IAAI,QAAQ,EAC3CN,EAAY,EACZC,EAAWK,EAAU,QAAQ,OAC7BJ,EAASC,EAAMF,CAAQ,EACvBQ,GACD,CACH,CAEA,SAASP,EAASU,EAAMC,EAAO,MAAO,CACpC,IAAIC,EAAM,EACND,IAAS,MACXC,EAAMF,EAENE,EAAMF,EAAK,OAAOG,GAAKA,EAAE,KAAK,gBAAkBF,EAAK,YAAW,CAAE,EAEpE,MAAMG,EAASF,EAAI,OAAOd,EAAY,GAAK,EAAGA,EAAY,CAAC,EAAE,OAC3D,CAACiB,EAAKF,IACJE,EACA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAKaF,EAAE;AAAA,mBACFA,EAAE;AAAA;AAAA;AAAA;AAAA,0EAKTA,EAAE,OACCA,EAAE;AAAA;AAAA,kBAECA,EAAE;AAAA,kBACFA,EAAE;AAAA;AAAA;AAAA,6BAGShB;AAAA;AAAA;AAAA,kBAIXgB,EAAE,SAAS,OACPA,EAAE,SAAS,QACVA,EAAE,SAAS,OAAS,EAAI,YAAc,YACvC;AAAA;AAAA;AAAA;AAAA;AAAA,YAMVA,EAAE;AAAA;AAAA,aAGV,EACJ,EACEpB,EAAS,UAAYqB,CACvB"}