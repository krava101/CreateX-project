{"version":3,"file":"commonHelpers4.js","sources":["../src/js/pages/news.js"],"sourcesContent":["import news from '../../data/data-news';\n\nconst newsList = document.querySelector('#news-list');\nconst newsSection = document.querySelector('.news');\nconst pagList = document.querySelector('.news-pagination-list');\nconst nextBtn = document.querySelector('#next-page-btn');\nconst filterList = document.querySelector('.news-nav-list');\nconst iconUrl = new URL('/img/icons.svg', import.meta.url).href;\nlet maxPages = Math.ceil(news.length / 6);\nlet newsType = 'all';\nlet pageIndex = 1;\n\nfunction loadNews(newsArr, type = 'all') {\n  let arr = 0;\n  if (type === 'all') {\n    arr = newsArr;\n  } else {\n    arr = newsArr.filter(e => e.type.toLowerCase() === type.toLowerCase());\n  }\n  const markup = arr.slice((pageIndex - 1) * 6, pageIndex * 6).reduce(\n    (acc, e) =>\n      acc +\n      `\n    <li class=\"news-card\">\n      <img\n        class=\"news-card-img\"\n        src=\"${e.img}\"\n        alt=\"News image\"\n      />\n      <div class=\"news-card-box\">\n        <a class=\"card-title\" href=\"./post.html?post=${e.id}\">${e.title}</a>\n        <ul class=\"news-date-list list\">\n          <li>${e.type}</li>\n          <li class=\"news-date-decor-item\"></li>\n          <li>${e.date}</li>\n          <li class=\"news-date-decor-item\"></li>\n          <li class=\"news-comments\">\n            <svg class=\"news-comment-icon\">\n              <use href=\"${iconUrl}#icon-comments\"></use>\n            </svg>\n            ${e.comments.length ? e.comments.length : 'No'} comments\n          </li>\n        </ul>\n        <p class=\"news-card-text\">\n          ${e.previewText}\n        </p>\n      </div>\n    </li>\n    `,\n    ''\n  );\n  newsList.innerHTML = markup;\n  maxPages = Math.ceil(arr.length / 6);\n  setTimeout(() => {\n    newsList.style.height = '100%';\n  }, 200);\n}\n\nfunction loadPag() {\n  if (maxPages === 1) {\n    nextBtn.style.display = 'none';\n    return (pagList.innerHTML = '');\n  }\n  const pagArr = Array.from({ length: maxPages }, (_, i) => i + 1);\n  const markup = pagArr.slice(0, 4).reduce(\n    (acc, e) =>\n      acc +\n      ` \n      <li class=\"news-pag-item\">\n        <button class=\"news-pagination-btn\" type=\"button\">${e}</button>\n      </li>\n  `,\n    ''\n  );\n  pagList.innerHTML = markup;\n}\nloadNews(news, newsType);\nloadPag();\npagList.children.length ? pagList.children[0].classList.add('active') : null;\n\npagList.addEventListener('click', event => {\n  if (event.target !== event.currentTarget) {\n    Array.from(pagList.children).forEach(e => e.classList.remove('active'));\n    newsList.style.height = '1564px';\n    pageIndex = +event.target.textContent;\n    event.target.parentNode.classList.add('active');\n    newsSection.scrollIntoView({ block: 'start' });\n    loadNews(news, newsType);\n  }\n});\n\nnextBtn.addEventListener('click', () => {\n  Array.from(pagList.children).forEach(e => e.classList.remove('active'));\n  if (pageIndex < maxPages) {\n    pageIndex++;\n    if (pageIndex <= pagList.children.length) {\n      pagList.children[pageIndex - 1].classList.add('active');\n    }\n    newsList.style.height = '1564px';\n    newsSection.scrollIntoView({ block: 'start' });\n    loadNews(news, newsType);\n  }\n});\n\nfilterList.addEventListener('click', event => {\n  Array.from(event.currentTarget.children).forEach(e =>\n    e.classList.remove('active')\n  );\n  event.target.parentNode.classList.add('active');\n  pageIndex = 1;\n  newsType = event.target.dataset.filter;\n  nextBtn.style.display = 'block';\n  loadNews(news, newsType);\n  loadPag();\n  pagList.children.length ? pagList.children[0].classList.add('active') : null;\n});\n"],"names":["newsList","newsSection","pagList","nextBtn","filterList","iconUrl","maxPages","news","newsType","pageIndex","loadNews","newsArr","type","arr","e","markup","acc","loadPag","_","i","event"],"mappings":"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"}