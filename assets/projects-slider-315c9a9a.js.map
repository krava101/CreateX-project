{"version":3,"file":"projects-slider-315c9a9a.js","sources":["../../src/js/helpers/touch-slider.js","../../src/api/projects.js","../../src/js/projects-slider.js"],"sourcesContent":["class TouchSlider {\n  constructor(list, callback, arrLength, swipeThreshold = 70) {\n    this.list = list;\n    this.callback = callback;\n    this.arrLength = arrLength || list.children.length;\n    this.swipeThreshold = swipeThreshold;\n    this.startX = 0;\n    this._index = 0;\n\n    this.init();\n  }\n\n  get index() {\n    return this._index;\n  }\n\n  set index(value) {\n    if (value >= 0 && value < this.arrLength) {\n      this._index = value;\n    }\n  }\n\n  init() {\n    this.list.addEventListener('touchstart', this.onTouchStart.bind(this));\n    this.list.addEventListener('touchmove', this.onTouchMove.bind(this), {\n      passive: false,\n    });\n    this.list.addEventListener('touchend', this.onTouchEnd.bind(this));\n  }\n\n  onTouchStart(event) {\n    this.startX = event.touches[0].clientX;\n  }\n\n  onTouchMove(event) {\n    if (Math.abs(event.touches[0].clientX - this.startX) > 10) {\n      event.preventDefault();\n    }\n  }\n\n  onTouchEnd(event) {\n    const endX = event.changedTouches[0].clientX;\n    let index = this.index;\n\n    if (endX > this.startX && endX - this.startX > this.swipeThreshold) {\n      this.index = index <= 0 ? this.arrLength - 1 : index - 1;\n      this.callback(this._index);\n    } else if (this.startX > endX && this.startX - endX > this.swipeThreshold) {\n      this.index = index === this.arrLength - 1 ? 0 : index + 1;\n      this.callback(this._index);\n    }\n  }\n}\n\nexport default TouchSlider;\n","const baseURL = 'https://createx-api.vercel.app';\n\nexport async function getProjects() {\n  try {\n    const response = await fetch(`${baseURL}/projects`);\n    if (!response.ok) {\n      throw new Error('Network response was not ok');\n    }\n    return await response.json();\n  } catch (e) {\n    console.error(e);\n  }\n}\n\nexport async function currentProject(id) {\n  try {\n    const response = await fetch(`${baseURL}/projects/${id}`);\n    if (!response.ok) {\n      throw new Error('Network response was not ok');\n    }\n    return await response.json();\n  } catch (e) {\n    console.error(e);\n  }\n}\n","import { getProjects } from '../api/projects.js';\nimport TouchSlider from './helpers/touch-slider.js';\n\nconst projectsList = document.getElementById('p-list');\nconst projectsLeftBtn = document.getElementById('p-left-btn');\nconst projectsRightBtn = document.getElementById('p-right-btn');\nconst projectsTitle = document.getElementById('p__title');\nconst projectsPagList = document.getElementById('p-pag-list');\n\nconst imgUrl = 'https://res.cloudinary.com/dxseifgey/image/upload/v1723796772';\nlet projectsIndex = 0;\nlet slider = 0;\n\nconst currentPath = window.location.pathname;\nconst navMap = {\n  '/CreateX-project/index.html':\n    'Browse our selected projects and learn more about our work',\n  '/CreateX-project/service.html': 'Related projects',\n  '/CreateX-project/project.html': 'Similar projects',\n  '/index.html': 'Browse our selected projects and learn more about our work',\n  '/service.html': 'Related projects',\n  '/project.html': 'Similar projects',\n};\n\nprojectsTitle.textContent = navMap[currentPath];\n\nexport const loadProjects = async (project, status) => {\n  const projects = await getProjects();\n  let list = projects;\n\n  if (project) {\n    list = projects.filter(\n      e => e.type === project.type && e.name !== project.name\n    );\n  }\n  if (status) {\n    list = projects.filter(e => e.status === status);\n  }\n  if (list.length < 1) {\n    document.querySelector('.projects__title-container').style.display = 'none';\n    document.querySelector('.projects__list-wrapper').style.display = 'none';\n    const projectsSection = document.querySelector('.projects');\n    projectsSection.style.paddingTop = '0';\n    projectsSection.style.backgroundColor = '#f4f5f6';\n    return;\n  }\n  if (list.length === 1) {\n    projectsLeftBtn.style.display = 'none';\n    projectsRightBtn.style.display = 'none';\n    projectsPagList.style.display = 'none';\n  }\n  const markup = list.reduce(\n    (acc, e) =>\n      acc +\n      `<li class=\"projects__card\">\n        <img\n          class=\"projects__card-img\"\n          src=\"${imgUrl + e.images[0].src}\"\n          alt=\"${e.name} img\"\n        />\n        <div class=\"projects__card-box\">\n          <h5 class=\"card-title\">${e.name}</h5>\n          <p class=\"projects__card-text\">${e.type}</p>\n          <a class=\"projects__card-link\" href=\"project.html?project=${\n            e._id\n          }\">view project</a>\n        </div>\n    </li>`,\n    ''\n  );\n  projectsList.innerHTML = markup;\n\n  slider = new TouchSlider(projectsList, activeProjectsSlider);\n\n  const pag = list.map(\n    (_, i) =>\n      `<li><button class=\"projects__pag-btn ${\n        i === 0 ? 'active' : ''\n      }\" type=\"button\" ></button></li>`\n  );\n  projectsPagList.innerHTML = pag.join('');\n};\n\nprojectsLeftBtn.addEventListener('click', () => {\n  projectsIndex <= 0\n    ? (projectsIndex = projectsList.children.length - 1)\n    : projectsIndex--;\n  activeProjectsSlider(projectsIndex);\n});\n\nprojectsRightBtn.addEventListener('click', () => {\n  projectsIndex === projectsList.children.length - 1\n    ? (projectsIndex = 0)\n    : projectsIndex++;\n  activeProjectsSlider(projectsIndex);\n});\n\nprojectsPagList.addEventListener('click', event => {\n  if (event.target.tagName === 'BUTTON') {\n    const pagButtons = Array.from(projectsPagList.children);\n    const newIndex = pagButtons.indexOf(event.target.parentElement);\n    if (newIndex !== -1 && newIndex !== projectsIndex) {\n      activeProjectsSlider(newIndex);\n    }\n  }\n});\n\nfunction activeProjectsSlider(index) {\n  projectsIndex = index;\n  slider.index = index;\n  if (projectsList.children.length > 1) {\n    const cardWidth =\n      projectsList.children[0].getBoundingClientRect().width + 30;\n    projectsList.style.transform = `translateX(${-index * cardWidth}px)`;\n    const activePag = projectsPagList.querySelector('.active');\n    if (activePag) {\n      activePag.classList.remove('active');\n    }\n    projectsPagList.children[index].firstElementChild.classList.add('active');\n  }\n}\n"],"names":["TouchSlider","list","callback","arrLength","swipeThreshold","value","event","endX","index","baseURL","getProjects","response","currentProject","id","e","projectsList","projectsLeftBtn","projectsRightBtn","projectsTitle","projectsPagList","imgUrl","projectsIndex","slider","currentPath","navMap","loadProjects","project","status","projects","projectsSection","markup","acc","activeProjectsSlider","pag","_","i","newIndex","cardWidth","activePag"],"mappings":"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"}