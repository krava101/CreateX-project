import{g}from"./projects-0519d275.js";class j{constructor(t,e,s,d=70){this.list=t,this.callback=e,this.arrLength=s||t.children.length,this.swipeThreshold=d,this.startX=0,this._index=0,this.init()}get index(){return this._index}set index(t){t>=0&&t<this.arrLength&&(this._index=t)}init(){this.list.addEventListener("touchstart",this.onTouchStart.bind(this)),this.list.addEventListener("touchmove",this.onTouchMove.bind(this),{passive:!1}),this.list.addEventListener("touchend",this.onTouchEnd.bind(this))}onTouchStart(t){this.startX=t.touches[0].clientX}onTouchMove(t){Math.abs(t.touches[0].clientX-this.startX)>10&&t.preventDefault()}onTouchEnd(t){const e=t.changedTouches[0].clientX;let s=this.index;e>this.startX&&e-this.startX>this.swipeThreshold?(this.index=s<=0?this.arrLength-1:s-1,this.callback(this._index)):this.startX>e&&this.startX-e>this.swipeThreshold&&(this.index=s===this.arrLength-1?0:s+1,this.callback(this._index))}}const o=document.getElementById("p-list"),h=document.getElementById("p-left-btn"),p=document.getElementById("p-right-btn"),y=document.getElementById("p__title"),a=document.getElementById("p-pag-list"),f="https://res.cloudinary.com/dxseifgey/image/upload/v1723796772";let r=0,m=0;const _=window.location.pathname,v={"/CreateX-project/index.html":"Browse our selected projects and learn more about our work","/CreateX-project/service.html":"Related projects","/CreateX-project/project.html":"Similar projects","/index.html":"Browse our selected projects and learn more about our work","/service.html":"Related projects","/project.html":"Similar projects"};y.textContent=v[_];const T=async(i,t)=>{const e=await g();let s=e;if(i&&(s=e.filter(n=>n.type===i.type&&n.name!==i.name)),t&&(s=e.filter(n=>n.status===t)),s.length<1){document.querySelector(".projects__title-container").style.display="none",document.querySelector(".projects__list-wrapper").style.display="none";const n=document.querySelector(".projects");n.style.paddingTop="0",n.style.backgroundColor="#f4f5f6";return}s.length===1&&(h.style.display="none",p.style.display="none",a.style.display="none");const d=s.reduce((n,c)=>n+`<li class="projects__card">
        <img
          class="projects__card-img"
          src="${f+c.images[0].src}"
          alt="${c.name} img"
        />
        <div class="projects__card-box">
          <h5 class="card-title">${c.name}</h5>
          <p class="projects__card-text">${c.type}</p>
          <a class="projects__card-link" href="project.html?project=${c._id}">view project</a>
        </div>
    </li>`,"");o.innerHTML=d,m=new j(o,l);const u=s.map((n,c)=>`<li><button class="projects__pag-btn ${c===0?"active":""}" type="button" ></button></li>`);a.innerHTML=u.join("")};h.addEventListener("click",()=>{r<=0?r=o.children.length-1:r--,l(r)});p.addEventListener("click",()=>{r===o.children.length-1?r=0:r++,l(r)});a.addEventListener("click",i=>{if(i.target.tagName==="BUTTON"){const e=Array.from(a.children).indexOf(i.target.parentElement);e!==-1&&e!==r&&l(e)}});function l(i){if(r=i,m.index=i,o.children.length>1){const t=o.children[0].getBoundingClientRect().width+30;o.style.transform=`translateX(${-i*t}px)`;const e=a.querySelector(".active");e&&e.classList.remove("active"),a.children[i].firstElementChild.classList.add("active")}}export{j as T,T as l};
//# sourceMappingURL=projects-slider-fa13c509.js.map
